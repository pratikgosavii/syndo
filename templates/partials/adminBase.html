{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>{% block title %}{% endblock title %} </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="" name="description" />
    <meta content="Themesdesign" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="{% static 'images/favicon.ico'%}">
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    rel="stylesheet"
  />

  <style>
    /* Vendor theme (purple #775599, cream #f0d28c) - pages can override .btn-primary in extra_css */
    :root {
        --vendor-primary: #775599;
        --vendor-accent: #f0d28c;
        --vendor-primary-dark: #5e4477;
    }
    /* Container / page horizontal spacing – half of default (applies to all pages) */
    .page-content {
        padding-left: 3px !important;
        padding-right: 3px !important;
    }
    .main-content .page-content .container,
    .main-content .page-content .container-fluid {
        padding-left: 3px !important;
        padding-right: 3px !important;
    }
    .dropdown-menu {
        max-height: 300px;
        overflow-y: auto;
    }
    .btn-primary {
        background-color: #FCA311  !important;
        border-color: #FCA311  !important;
    }
    /* Page title with icon - use: <h4 class="mb-sm-0 font-size-18"><i class="bi bi-icon-name me-2 text-primary"></i>Title</h4> */
    .page-title-box .bi { opacity: 0.9; }
    .btn .bi, .btn .mdi, .btn .bx { vertical-align: middle; }

    .table-filter-row th {
        background-color: rgba(0, 0, 0, 0.03);
        padding: 6px;
    }

    .table-filter-input {
        width: 100%;
        font-size: 0.85rem;
        padding: 4px 6px;
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 4px;
    }

    .table-filter-input:focus {
        outline: none;
        border-color: #FCA311;
        box-shadow: 0 0 0 1px rgba(252, 163, 17, 0.3);
    }
    /* Container max-width: 1219px (no breakpoint – applies at all widths) */
    .container,
    .container-lg,
    .container-md,
    .container-sm,
    .container-xl,
    .container-xxl {
        max-width: 1219px !important;
    }
</style>


  


    {% block css %}
    {% block extra_css %}
    {% endblock extra_css %}
    <!-- preloader css -->
    <link rel="stylesheet" href="{% static 'css/preloader.min.css'%}" type="text/css" />

    <!-- Bootstrap Css -->
    <link href="{% static 'css/bootstrap.min.css'%}" id="bootstrap-style" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="{% static 'css/icons.min.css'%}" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="{% static 'css/app.min.css'%}" id="app-style" rel="stylesheet" type="text/css" />
    {% endblock css %}

</head>

<body {% block extra_body %} data-topbar="dark" data-sidebar="light"{% endblock extra_body %}>
    <!-- Begin page -->
    <div id="layout-wrapper">
        {% block header %}
        {% include "partials/header.html" %}
        {% endblock header %}
        {% block left_sidebar %}
        {% include 'partials/left-sidebar.html' %}
        {% endblock left_sidebar %}


        {% block content %}
        {% block footer %}
        {% endblock footer %}
        {% endblock content %}
    </div>
    <!-- END layout-wrapper -->


    {% block right_sidebar %}
        {% include 'partials/right-sidebar.html'%}
    {% endblock right_sidebar %}


    {% block javascript %}
    <!-- JAVASCRIPT -->
    <script src="{% static 'libs/jquery/dist/jquery.min.js'%}"></script>
    <script src="{% static 'libs/bootstrap/dist/js/bootstrap.bundle.min.js'%}"></script>
    <script src="{% static 'libs/metismenu/dist/metisMenu.min.js'%}"></script>
    <script src="{% static 'libs/simplebar/dist/simplebar.min.js'%}"></script>
    <script src="{% static 'libs/node-waves/dist/waves.min.js'%}"></script>
    <script src="{% static 'libs/feather-icons/dist/feather.min.js'%}"></script>
    <!-- pace js -->
    <script src="{% static 'libs/pace-js/pace.min.js'%}"></script>
    <script src="{% static 'js/app.js'%}"></script>
    <script>
        (function () {
            function initTableFilters() {
                const tables = document.querySelectorAll('table');
                tables.forEach((table) => {
                    if (table.dataset.enableFilters === 'false') {
                        return;
                    }
                    const thead = table.querySelector('thead');
                    if (!thead || thead.querySelector('.table-filter-row')) {
                        return;
                    }

                    const headerRow = thead.querySelector('tr');
                    if (!headerRow) {
                        return;
                    }

                    const filterRow = document.createElement('tr');
                    filterRow.classList.add('table-filter-row');
                    const headers = headerRow.querySelectorAll('th');

                    headers.forEach((th, columnIndex) => {
                        const filterableAttr = th.dataset.filterable;
                        const headerText = th.textContent.trim();
                        const isActionColumn =
                            /action/i.test(headerText) ||
                            /^sr\s*no$/i.test(headerText) ||
                            /^delete$/i.test(headerText) ||
                            filterableAttr === 'false';
                        const filterCell = document.createElement('th');

                        if (!isActionColumn) {
                            const input = document.createElement('input');
                            input.type = 'text';
                            input.placeholder = 'Filter';
                            input.className = 'table-filter-input';
                            input.dataset.columnIndex = columnIndex.toString();
                            input.addEventListener('input', () =>
                                applyFilters(table)
                            );
                            filterCell.appendChild(input);
                        }

                        filterRow.appendChild(filterCell);
                    });

                    thead.appendChild(filterRow);
                    table.dataset.enableFilters = 'true';
                });
            }

            function applyFilters(table) {
                const inputs = table.querySelectorAll('.table-filter-input');
                const rows = table.querySelectorAll('tbody tr');

                rows.forEach((row) => {
                    let visible = true;
                    inputs.forEach((input) => {
                        const value = input.value.trim().toLowerCase();
                        const columnIndex = parseInt(
                            input.dataset.columnIndex,
                            10
                        );
                        if (!Number.isInteger(columnIndex) || value === '') {
                            return;
                        }
                        const cell = row.querySelectorAll('td')[columnIndex];
                        const cellText = cell
                            ? cell.textContent.trim().toLowerCase()
                            : '';
                        if (!cellText.includes(value)) {
                            visible = false;
                        }
                    });
                    row.style.display = visible ? '' : 'none';
                });
            }

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTableFilters);
            } else {
                initTableFilters();
            }
        })();
    </script>
    {% block extra_js %}
    
    {% endblock extra_js %}
    
    {% endblock javascript %}
</body>

</html>