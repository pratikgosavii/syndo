{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Login Page</title>
    <!-- Bootstrap CSS -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />

    <style>
        body {
            background-color: #ffdb8a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .login-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
        }

        .logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo img {
            width: 100px;
            margin-bottom: 8px;
        }

        .btn-purple {
            background-color: #ffdb8a;
            color: #fff;
        }

        .btn-purple:hover {
            background-color: #ffdb8a;
        }

        .register-link {
            text-align: center;
            margin-top: 15px;
        }

        .register-link a {
            color: #291a4a;
            text-decoration: none;
        }

        .register-link a:hover {
            text-decoration: underline;
        }

        .password-wrapper {
            position: relative;
        }
        .password-wrapper .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            border: none;
            background: none;
            cursor: pointer;
            padding: 0;
            color: #6c757d;
        }
        .password-wrapper .toggle-password:hover {
            color: #291a4a;
        }
        .password-wrapper input {
            padding-right: 40px;
        }
        .mobile-error {
            font-size: 0.875rem;
            color: #dc3545;
            margin-top: 4px;
        }
    </style>
</head>
<body>

<div class="login-container">
    {% if form.errors %}
        <div class="alert alert-danger mt-3">
            <ul>
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                {% endfor %}
            </ul>
        </div>
    {% endif %}
    <div class="logo">
        <img src="{% static 'images/svindo_logo.png' %}" alt="Logo"/>
    </div>
    <h4 class="text-center mb-4">Vendor Login</h4>
    <form action="" method="POST">
        {% csrf_token %}
        <div class="mb-3">
            <label for="mobile" class="form-label">Mobile</label>
            <input
                    type="tel"
                    class="form-control"
                    id="mobile"
                    value="{{ mobile|default:'' }}"
                    name="mobile"
                    placeholder="Enter 10-digit mobile number"
                    pattern="[0-9]{10}"
                    maxlength="10"
                    minlength="10"
                    inputmode="numeric"
                    autocomplete="tel"
                    required
            />
            <span id="mobile-error" class="mobile-error" style="display: none;">Please enter a valid 10-digit mobile number.</span>
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <div class="password-wrapper">
                <input
                        type="password"
                        class="form-control"
                        id="password"
                        name="password"
                        placeholder="Enter your password"
                        autocomplete="current-password"
                        required
                />
                <button type="button" class="toggle-password" id="togglePassword" aria-label="Show password">
                    <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                        <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                    </svg>
                    <svg id="eyeSlashIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" style="display: none;">
                        <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
                        <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
                        <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
                    </svg>
                </button>
            </div>
        </div>
        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
        <button type="submit" class="btn btn-purple w-100" style="color:black;">Login</button>
    </form>

</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Password visibility toggle
    document.getElementById('togglePassword').addEventListener('click', function () {
        var passwordInput = document.getElementById('password');
        var eyeIcon = document.getElementById('eyeIcon');
        var eyeSlashIcon = document.getElementById('eyeSlashIcon');
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            eyeIcon.style.display = 'none';
            eyeSlashIcon.style.display = 'inline';
            this.setAttribute('aria-label', 'Hide password');
        } else {
            passwordInput.type = 'password';
            eyeIcon.style.display = 'inline';
            eyeSlashIcon.style.display = 'none';
            this.setAttribute('aria-label', 'Show password');
        }
    });

    // Mobile 10-digit validation
    var mobileInput = document.getElementById('mobile');
    var mobileError = document.getElementById('mobile-error');
    mobileInput.addEventListener('input', function () {
        this.value = this.value.replace(/\D/g, '').slice(0, 10);
        if (this.value.length > 0 && this.value.length !== 10) {
            mobileError.style.display = 'block';
        } else {
            mobileError.style.display = 'none';
        }
    });
    mobileInput.addEventListener('invalid', function () {
        if (this.value && this.value.length !== 10) {
            mobileError.style.display = 'block';
        }
    });
    document.querySelector('form').addEventListener('submit', function (e) {
        var val = mobileInput.value.replace(/\D/g, '');
        if (val.length !== 10) {
            e.preventDefault();
            mobileError.style.display = 'block';
            mobileInput.focus();
            return false;
        }
        mobileError.style.display = 'none';
    });
</script>
</body>
</html>
